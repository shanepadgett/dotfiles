# --- Completion system ----
autoload -Uz compinit
compinit -C

COLORTERM=truecolor

BREW_PREFIX=$(brew --prefix 2>/dev/null)
[[ -n "$BREW_PREFIX" ]] && source "$BREW_PREFIX/share/zsh-autosuggestions/zsh-autosuggestions.zsh"

# Homebrew completions
if [[ -n "$BREW_PREFIX" && -d "$BREW_PREFIX/share/zsh/site-functions" ]]; then
  fpath=("$BREW_PREFIX/share/zsh/site-functions" $fpath)
fi

# Add deno completions to search path
if [[ ":$FPATH:" != *":$HOME/.zsh/completions:"* ]]; then export FPATH="$HOME/.zsh/completions:$FPATH"; fi

# Exports
# mise shims (also in ~/.zprofile) so interactive shells find runtimes
export PATH="$HOME/.local/share/mise/shims:$PATH"
export PATH="$HOME/.local/bin:$PATH"
export BUN_INSTALL="$HOME/.bun"
export PATH="$HOME/.opencode/bin:$PATH"
export PATH="$BUN_INSTALL/bin:$PATH"
export EDITOR="zed --wait"
export GITHUB_USERNAME="shanepadgett"
export DEV_PATH="$HOME/dev"
export DO_NOT_TRACK=1

export PATH="$HOME/.antigravity/antigravity/bin:$PATH"
### MANAGED BY RANCHER DESKTOP START (DO NOT EDIT)
export PATH="/Users/spadgett/.rd/bin:$PATH"
### MANAGED BY RANCHER DESKTOP END (DO NOT EDIT)

# Load custom aliases
[ -f "$HOME/.aliases.zsh" ] && source "$HOME/.aliases.zsh"

# --- Inits (Must remain at the end) ---
eval "$(zoxide init zsh)"
eval "$(direnv hook zsh)"
# Lazy-load starship prompt (runs at first prompt render)
autoload -Uz add-zsh-hook
_starship_init_once() {
  add-zsh-hook -d precmd _starship_init_once
  eval "$(starship init zsh)"
}
add-zsh-hook precmd _starship_init_once

# mise: shims-first (see ~/.zprofile). Avoid `mise activate` here.
# Initialize fzf (enables Ctrl+R history search and Tab completion)
[ -f ~/.fzf.zsh ] && source ~/.fzf.zsh
[[ -n "$BREW_PREFIX" ]] && source "$BREW_PREFIX/share/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh"
